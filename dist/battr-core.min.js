!function(e){"use strict";function t(e){setTimeout(e,0)}function r(){return"id_"+K++}function n(e){return e.uid=e.uid||r(),e.uid}function o(e,t){if("function"==typeof t)for(var r=e.parentNode;r&&r!==document.documentElement&&t(r);)r=r.parentNode}function i(e,t){z||(z=new MutationObserver(function(e){e.forEach(function(e){"attributes"===e.type&&Q[e.target.uid](e.attributeName)})})),Q[e.uid]=t,z.observe(e,{attributes:!0})}function u(e,r,n){function o(o,i){var u=arguments[arguments.length-1];t(function(){var t=e[r][n].element;i=i&&"function"!=typeof i?i:1;for(var l=0,a=t.parentNode;a&&l<=i;){if(l+=1,e[a.uid]&&e[a.uid][o])return void u(e[a.uid][o].controller);a=a.parentNode}})}function i(o,i){t(function(){for(var t,u=e[r][n].element,l=0,a=u.childNodes,c=a.length;l<c;)if(t=a[l],l+=1,e[t.uid]&&e[t.uid][o])return void i(e[t.uid][o].controller)})}function u(o,i){t(function(){for(var t=e[r][n].element,u=t.parentNode.firstChild;u;){if(uid=u.uid,e[u.uid]&&e[u.uid][o])return void i(e[u.uid][o].controller);u=u.nextSibling}})}return{findParent:o,findChild:i,findSibling:u}}function l(e){if(e.controller&&e.element.hasAttribute("register")){var t=element.getAttribute("register");W[t]=W[t]||[],W[t].push(e.controller)}}function a(e,t){o(e,function(e){return!Z[e.uid]||(Object.defineProperty(t,"$parent",{value:Z[e.uid],enumerable:!1}),!1)}),Z[e.uid]=t}function c(e){if(e)for(var t=e;t&&t!==document.docuemntElement;){if(Z[t.uid])return Z[t.uid];t=t.parentNode}}function f(){function e(){var n=s({internal:r,leaves:t,copy:e});return Object.keys(r).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t[0],e))}),t.push(n),n}var t=[],r={};return e()}function s(e){function t(t,r){e.leaves[0].hasOwnProperty(t)||e.leaves.forEach(function(r){Object.defineProperty(r,t,{get:function(){return e.internal[t]},set:function(){throw Error("Cannot set model property. Use `model.$assign(name: string, value: any)`")},enumerable:!0,configurable:!1})}),e.internal[t]=r,o(t,r)}function r(){a.$$disabled=!0}function n(){a.$$disabled=!1}function o(t,r){e.leaves.forEach(function(e){e.$$disabled&&!0!==e.$$forceEnable||(e.$observers[t]&&e.$observers[t].forEach(function(e){e(r)}),e.$observers._global.forEach(function(e){e()}))})}function i(t,r,n){if("function"==typeof t){var o;if(!0===r)for(o=this.$parent;o;)o.$observe(t,!0),o=o.$parent;return a.$observers._global.push(t),t(),function(){if(!0===r)for(o=this.$parent;o;)o.$observers._global=o.$observers._global.filter(function(e){return e!==t}),o=o.$parent;a.$observers._global=a.$observers._global.filter(function(e){return e!==t})}}return a.$observers[t]=a.$observers[t]||[],a.$observers[t].push(r),e.internal.hasOwnProperty(t)&&r(e.internal[t]),function(){a.$observers[t]=a.$observers[t].filter(function(e){return e!==r})}}function u(){a.$observers={},e.leaves.splice(e.leaves.indexOf(a),1)}function l(){for(var e=this,t={};e;)Object.keys(e).forEach(function(r){t[r]||(t[r]=e[r])}),e=e.$parent;return t}var a=Object.defineProperties({},{$assign:{value:t,enumerable:!1,configurable:!1,writable:!1},$$copy:{value:e.copy,enumerable:!1,configurable:!1,writable:!1},$$disable:{value:r,enumerable:!1,configurable:!1,writable:!1},$$disabled:{value:!1,enumerable:!1,configurable:!1,writable:!0},$$forceEnable:{value:!1,enumerable:!1,configurable:!1,writable:!0},$$enable:{value:n,enumerable:!1,configurable:!1,writable:!1},$observe:{value:i,enumerable:!1,configurable:!1,writable:!1},$observers:{value:{_global:[]},enumerable:!1,configurable:!1,writable:!0},$$destroy:{value:u,enumerable:!1,configurable:!1,writable:!1},$$squash:{value:l,enumerable:!1,configurable:!1,writable:!1},$$trigger:{value:o,enumerable:!1,configurable:!1,writable:!1}});return a}function d(e,t,r){var o=n(e);return te[o]=p(e,t,r),te[o]}function p(e,t,r){if(e.uid){if(te[e.uid])return te[e.uid];var n=b(t||e.getAttribute("controller"));if(n){r=r||{},r.model||(r.model=f()),a(e,r.model);var o=!1,i=m(n,r);return function(){if(!o){var t=new i;return Object.defineProperty(t,"$model",{value:r.model,enumerable:!1,configurable:!1,writable:!1}),te[e.uid]=t,o=!0,t}}}}}function b(e){if("function"==typeof e)return e;if(ee[e])return ee[e]}function m(e,t){var r,n=[];return e instanceof Array?(r=e,e=r.pop()):r=e.toString().match(/^function\s*[^\(]*\(\s*([^\)]*)\)/m)[1].replace(/ /g,"").split(","),function(){Array.prototype.slice.call(arguments,0);r.forEach(function(r,o){e.$inject?n.push(e.$inject[o]):n.push(t[r])}),e.apply(this,n)}}function v(e){D(e),e.selector.split(",").forEach(function(t){re[t]={attrs:e.attrs,compile:e.compile,controller:e.controller,model:!(!1===e.model||!e.controller&&!0!==e.model),priority:e.priority||0,replace:e.replace,select:function(e){return t===e},selector:t,template:e.template,transfer:e.transfer}})}function y(e,t,r){var o=E(e);if(o){n(e);return g(o,e,t,r)}}function h(e,t,r,o){var i=E(e);if(i){var u=n(t);return e.uid=u,$(e,t,i,r,o)}}function $(e,t,r,n,o){if(!t||t.uid){var i=_(e);if(ne[e.uid]&&ne[e.uid][i])return ne[e.uid][i].compiler;if(r){var u=t.uid;return ne[u]=ne[u]||{},r.compile&&r.compile(t),ne[u][i]={},ne[u][i].compiler=function(){if(ne[u][i].compiled)return void c(t).$$enable();if(o=o||document.body,o.contains(t)){var l,s=c(n);l=r.model?f():s?s.$$copy():f(),a(t,l),r.controller&&(ne[u][i].controller=d(t,r.controller,{model:l,element:t,attrs:V(r.attrs,t)})()),ne[u][i].uid=u,ne[u][i].element=t,ne[u][i].model=l,ne[u][i].attr=e,ne[u][i].compiled=!0}},ne[u][i].compiler.priority=r.priority||0,ne[u][i].compiler.$element=t,ne[u][i].compiler}}}function g(e,t,r,n){if(t&&t.uid){var o,i,s=t.uid;if(o=_(t),ne[s]&&ne[s][o])return ne[s][o].compiler;ne[s]=ne[s]||{};var p=document.createDocumentFragment();return t.originalNode=!0,i=p,e.compile&&e.compile(t),ne[s][o]={},ne[s][o].compiler=function(){if(ne[s][o].compiled)return void(ne[s][o].model&&ne[s][o].model.$$enable());if(n=n||document.body,n.contains(t)){var p,b=c(r);if(p=e.model?f():b?b.$$copy():f(),a(t,p),e.template){i.appendChild(A(t,e));t.parentNode;t.parentNode.insertBefore(i,t),i=t.previousSibling}else{i.appendChild(t.cloneNode());for(var m;m=t.firstChild;)i.firstChild.append(m);t.parentNode.insertBefore(i,t),i=t.previousSibling;i.childNodes.length}t.remove(),i.uid=s;if([].concat(i).forEach(function(t){e.selector===t.nodeName.toLowerCase()&&t.classList.add(i.nodeName.toLowerCase())}),e.controller){var v=V(e.attrs,i);ne[s][o].controller=d(i,e.controller,{model:p,element:i,attrs:v,helper:u(ne,s,o)})(),ne[s][o].attrs=v}ne[s][o].uid=s,ne[s][o].element=i,ne[s][o].model=p,ne[s][o].compiled=!0,l(i,ne[s][o])}},ne[s][o].compiler.priority=e.priority||0,ne[s][o].compiler.$element=i,ne[s][o].compiler}}function E(e){return re[_(e)]}function N(e){e.destroy=!1}function O(e){if(e.uid){if(ne[e.uid]){if(!1===e.destroy)return void w(e);c(e)}}}function w(e){if(e.uid){var t=ne[e.uid];if(t){var r=c(t.element);r&&r.$$disable(),delete e.destroy}}}function A(e,t){var r,n=S(t.template);return!0===t.replace?(r=n,T(t.transfer,e,r)):r.appendChild(n),C(e,n),r}function T(e,t,r){e&&null!==e&&(!0!==e&&!0!==e.attributes||Array.prototype.slice.call(t.attributes).forEach(function(e){"class"===e.name?r.setAttribute(e.name,r.getAttribute(e.name)+" "+e.value):r.setAttribute(e.name,e.value)}),!0!==e&&!0!==e.classes||r.classList.add.apply(r.classList,Array.prototype.slice.call(t.classList)))}function C(e,t){var r,n=Array.prototype.slice.call(e.querySelectorAll("mc-transpose")),o=Array.prototype.slice.call(t.querySelectorAll("mc-transpose"));if(n.length)n.forEach(function(n){var o=t.querySelector('mc-transpose, [name="'+n.getAttribute("name")+'"]');if(o){for(;r=e.firstChild;)o.parentNode.insertBefore(r,o);o.remove()}});else if(o=t.querySelector("mc-transpose")){for(;r=e.firstChild;)o.parentNode.insertBefore(r,o);o.remove()}}function _(e){switch(e.nodeType){case Y.ELEMENT_NODE:return e.nodeName.toLowerCase();case Y.ATTRIBUTE_NODE:return"["+e.name+"]"}return""}function D(e){if("object"!=typeof e||null===e)throw Error("`Component` is expecting a object param");if("string"!=typeof e.selector||""===e.selector)throw Error("`options.selector must be a valid string`");if(e.selector&&void 0!==re[e.selector])throw Error('A component with these selectors "'+e.selector+'" already exists');if(e.template&&("string"!=typeof e.template||""===e.template))throw Error("`options.template must be a valid string`")}function S(e){var t=document.createElement("div");return t.innerHTML=e,t.firstChild}function j(e){return e.indexOf("${")>-1}function P(e,t,r){if(e&&j(e.textContent)){var o=n(e);return t&&(e.elementUID=n(t)),le[o]=L(e,t,r),le[o]}}function L(e,t,r){function n(){"function"==typeof o&&(o(),o=void 0)}if(e.uid){if(le[e.uid])return le[e.uid];var o,i=ie(e.textContent),u=function(){if(r=r||document.body,r.contains(e)&&!o){var u=c(t||e.parentNode);u&&(o=u.$observe(function(){if(!e)return void n();try{e.textContent=ue(i,u.$$squash())}catch(e){}},!0))}};return u.priority=1e3,u.destroy=n,u}}function M(){x(document.body),G()}function x(e){R(e,U,0,e),F()}function B(e){!1===e.destroy?R(e,w,0,e):R(e,O,0,e)}function U(e,t,r,n){e.$$doNotParse||r&&r.$$doNotParse||(e.nodeType===Y.ELEMENT_NODE?q(e,t,r,n):e.nodeType===Y.TEXT_NODE&&I(e,t,r,n))}function q(e,t,r,n){e.hasAttribute("controller")&&!p(e)&&k(e,t,d(e));var o=g(e);if(o)return void o();k(e,t,y(e,r,n));for(var i,u=Array.prototype.slice.call(e.attributes||[]);i=u.pop();)"controller"!==i.name&&(L(i,e)||k(e,t,P(i,e,n)),$(i,e)||k(e,t,h(i,e,r,n)))}function I(e,t,r,n){var o=L(e);if(o)return void o();k(r,t,P(e,r,n))}function R(e,t,r,n,o){for(t(e,r,o,n),e.uid&&(o=e),e=e.firstChild;e;)R(e,t,r+1,n,o),e=e.nextSibling}function k(e,t,r){"function"==typeof r&&ae.push({depth:t,compile:r,priority:r.priority||0})}function F(){ae.sort(function(e,t){return e.depth<t.depth?-1:e.depth>t.depth?1:e.priority>t.priority?-1:e.priority<t.priority?1:0}).forEach(function(e){e.compile()}),ae=[]}function G(){H||(H=new MutationObserver(function(e){e.forEach(function(e){e.removedNodes.length&&Array.prototype.slice.call(e.removedNodes).forEach(function(e){!e.uid||e.originalNode||e.mcplaceholder||B(e)}),e.addedNodes.length&&Array.prototype.slice.call(e.addedNodes).forEach(function(e){x(e)})})}),H.observe(document,{childList:!0,subtree:!0}))}function X(){M(document.body)}String.prototype.toBoolean=function(){return"true"==this},String.prototype.isBoolean=function(){return"true"===this||"false"===this};var z,H,Y={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11},J=Object.prototype,K=(J.toString,Object.keys,Object.hasOwnProperty,"undefined"!=typeof Symbol&&Symbol.prototype,0),Q={},V=function(e,t){function r(e,r){return o[e]=o[e]||[],o[e].push(r),u[e]=t.getAttribute(e),r(u[e]),function(){o[e]=o[e].filter(function(e){return e!==r})}}function n(){o={}}var o=(t.uid,{}),u={},l=Object.defineProperties({},{getAttribute:{value:function(e){return t.getAttribute(e)},enumerable:!1,configurable:!1,writable:!1},setAttribute:{value:function(e){return t.setAttribute(e)},enumerable:!1,configurable:!1,writable:!1},$observe:{value:r,enumerable:!1,configurable:!1,writable:!1},$$destroy:{value:n,enumerable:!1,configurable:!1,writable:!1}});return i(t,function(e){u[e]!==t.getAttribute(e)&&(u[name]=t.getAttribute(e),(o[name]||[]).forEach(function(e){e(u[name])}))}),l},W={},Z={},ee={},te={},re={},ne={},oe=Object.freeze({define:v,bindElement:y,bindAttribute:h,compileAttribute:$,compileElement:g,find:E,disableOnRemove:N,destroy:O,disable:w}),ie=window["template-strings-compile"],ue=window["template-strings-resolve-to-string"],le={},ae=[];e.component=oe,e.init=X}(this["battr-core"]=this["battr-core"]||{});
